(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{12:function(e,t,n){e.exports=n(24)},17:function(e,t,n){},19:function(e,t,n){},24:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(9),r=n.n(i),l=(n(17),n(2)),c=n(1),s=n(4),u=n(3),p=n(5),d=(n(19),function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isToggleOn:!0},n.handleClick=function(){n.setState(function(e){return{isToggleOn:!e.isToggleOn}}),n.props.showPlaceList()},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.isToggleOn;return o.a.createElement("div",{className:"menu_logo"},o.a.createElement("div",{id:"menu",onClick:this.handleClick,onKeyDown:function(t){return 13===t.keyCode&&e.handleClick()},role:"menu",tabIndex:"0","aria-label":"menu","aria-owns":"mi-0 mi-1 mi-2 mi-3 mi-4 mi-5 mi-6 mi-7 mi-8 mi-9 mi-10 mi-11 mi-12 mi-13 mi-14 mi-15 mi-16 mi-17 mi-18 mi-19 mi-20 mi-21 mi-22 mi-23 mi-24"},t?o.a.createElement("svg",{viewBox:"0 0 41 41"},o.a.createElement("rect",{x:"5",y:"12",fill:"currentColor",width:"32px",height:"2"}),o.a.createElement("rect",{x:"5",y:"21",fill:"currentColor",width:"32px",height:"2"}),o.a.createElement("rect",{x:"5",y:"30",fill:"currentColor",width:"32px",height:"2"})):o.a.createElement("svg",{viewBox:"0 0 41 41"},o.a.createElement("path",{d:"M5 12 L36 30",stroke:"currentColor",strokeWidth:"3"}),o.a.createElement("path",{d:"M5 30 L36 12",stroke:"currentColor",strokeWidth:"3"}))))}}]),t}(a.Component)),m=function(e){var t=e.showPlaceList;return o.a.createElement("header",null,o.a.createElement("h1",{id:"page-header"},"Neighborhood Map"),o.a.createElement(d,{showPlaceList:t}))},h=n(6),f=n.n(h),g=n(10),w=n(11),v=n.n(w),b=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={inputValue:""},n.updateInput=function(e){n.setState({inputValue:e})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.inputValue,n=this.props.updateQuery;return o.a.createElement("label",{htmlFor:"filter-text"},o.a.createElement(v.a,{id:"filter-text",type:"text",role:"search",placeholder:"Search places by name",value:t,debounceTimeout:1e3,onChange:function(t){e.updateInput(t.target.value),n(t.target.value)}}),o.a.createElement("span",{id:"filter-help"},"Filter"))}}]),t}(a.Component),y=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={buttons:[],focusedIdx:0,focusedButton:{}},n.refList=o.a.createRef(),n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props.locations;t.length>0&&e.locations!==t&&this.manageFocus()}},{key:"manageFocus",value:function(){var e=this.refList.current,n=t.slice(e.childNodes),a=n[0],o=!0,i=!0,r=!1,l=void 0;try{for(var c,s=n[Symbol.iterator]();!(i=(c=s.next()).done);i=!0){var u=c.value;o?(u.tabIndex="0",o=!1):u.tabIndex="-1"}}catch(p){r=!0,l=p}finally{try{i||null==s.return||s.return()}finally{if(r)throw l}}this.setState({buttons:n,focusedIdx:0,focusedButton:a})}},{key:"handleKeyDown",value:function(e){var t=this.props.selectPlace,n=this.state.buttons,a=this.state.focusedIdx;switch(e.keyCode){case 38:case 37:e.preventDefault(),(a-=1)<0&&(a+=n.length);break;case 40:case 39:e.preventDefault(),a=(a+1)%n.length;break;case 13:case 32:e.preventDefault();var o=e.target;o.style.background="#454545";var i=n.indexOf(o);if(i<0)return;a=i,t(e.target.innerText);break;default:return}this.changeFocus(n,a)}},{key:"handleClick",value:function(e){var t=this.state.buttons,n=this.state.focusedIdx,a=e.target;a.style.background="#454545";var o=t.indexOf(a);o<0||(n=o,this.changeFocus(t,n))}},{key:"changeFocus",value:function(e,t){var n=this.state.focusedButton;n.tabIndex=-1,n.setAttribute("aria-selected",!1),n.style.background="black";var a=e[t];a.tabIndex=0,a.focus(),a.setAttribute("aria-selected",!0),a.style.background="#454545",this.setState({focusedButton:a,focusedIdx:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,a=t.selectPlace;return o.a.createElement("ul",{ref:this.refList,id:"places-list",role:"listbox",className:"listbox"},n.map(function(t,n){return o.a.createElement("li",{"aria-labelledby":"places name",key:t.id,id:"mi-".concat(n),className:"places-list-item",role:"option","aria-selected":"false",onClick:function(t){e.handleClick(t),a(t.target.innerText)},onKeyDown:function(t){e.handleKeyDown(t)}},t.name)}))}}]),t}(a.Component);y.slice=function(e){return Array.prototype.slice.call(e)};var k=y,E=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={map:null,largeInfowindow:null,markers:[]},n.loadGoogleMapAPIJS=function(e){var t=window.document.getElementsByTagName("script")[0],n=window.document.createElement("script");n.src=e,n.setAttribute("onerror","googleError()"),n.async=!0,t.parentNode.insertBefore(n,t)},n.initMap=function(){var e=n.props.locations,t=new window.google.maps.Map(n.myMapContainer.current,{center:{lat:26.14,lng:78.1},zoom:6}),a=new window.google.maps.InfoWindow;n.setState({map:t,largeInfowindow:a}),e.length&&n.loadMarkersOnMap()},n.googleError=function(){var e=window.document.getElementById("map-error");e.hidden=!1,window.document.getElementById("map").appendChild(e)},n.animateSelectedPlaceOnMap=function(e){for(var a=n.state,o=a.map,i=a.markers,r=a.largeInfowindow,l=0;l<i.length;l+=1)e===i[l].title?(i[l].setAnimation(window.google.maps.Animation.BOUNCE),t.populateInfoWindow(o,i[l],r)):i[l].setAnimation(null);return i},n.filterMarkerOnMap=function(e){for(var t=n.state,a=t.map,o=t.markers,i=new RegExp(f()(e.trim()),"i"),r=0;r<o.length;r+=1)i.test(o[r].title)?o[r].setMap(a):o[r].setMap(null);return o},n.loadMarkersOnMap=function(){for(var e=n.state,a=e.map,o=e.largeInfowindow,i=e.markers,r=n.props.locations,l=new window.google.maps.LatLngBounds,c=function(e){var n=t.mapMarkerToMap(r[e],a,e);i.push(n),n.addListener("click",function(){t.populateInfoWindow(a,n,o)}),l.extend(n.position)},s=0;s<r.length;s+=1)c(s);a.fitBounds(l)},n.myMapContainer=o.a.createRef(),n}return Object(p.a)(t,e),Object(c.a)(t,null,[{key:"mapMarkerToMap",value:function(e,t,n){var a=e.name[0];return new window.google.maps.Marker({map:t,position:{lat:e.location.lat,lng:e.location.lng},title:e.name,animation:window.google.maps.Animation.DROP,id:n,label:a})}}]),Object(c.a)(t,[{key:"componentDidMount",value:function(){window.initMap=this.initMap,window.googleError=this.googleError,"object"===typeof window.google&&"object"===typeof window.google.maps?this.initMap():this.loadGoogleMapAPIJS("https://maps.googleapis.com/maps/api/js?key=AIzaSyBtsirN68OAeo4fv8o0iEOZ5dJlEAHLUxA&callback=initMap")}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.filterText,a=t.selectedPlaceTitle,o=t.locations,i=this.state.map;n!==e.filterText&&this.setState({markers:this.filterMarkerOnMap(n)}),a!==e.selectedPlaceTitle&&this.setState({markers:this.animateSelectedPlaceOnMap(a)}),o.length&&o!==e.locations&&i&&!n&&this.loadMarkersOnMap()}},{key:"render",value:function(){return o.a.createElement("section",{id:"maptab",role:"application"},o.a.createElement("div",{ref:this.myMapContainer,id:"map","aria-label":"Places on Map","aria-describedby":"map-help"}),o.a.createElement("div",{id:"map-help"},o.a.createElement("p",null,"Map showing the places as per the",o.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:"https://developer.foursquare.com/"},o.a.createElement("span",null," Foursquare API")))),o.a.createElement("div",{id:"map-error","aria-label":"Can not load the Map",hidden:!0},o.a.createElement("p",null,o.a.createElement("span",{className:"error"},'"This page can not load Google Maps correctly."'),o.a.createElement("br",null),o.a.createElement("em",null,"Google Map API now requires the use of a valid API Key."),o.a.createElement("br",null),o.a.createElement("a",{href:"https://developers.google.com/maps/documentation/javascript/get-api-key"},"Go get one!"))))}}]),t}(a.Component);E.populateInfoWindow=function(e,t,n){n.getPosition()!==t.position&&(n.marker&&n.marker.setAnimation(null),t.setAnimation(window.google.maps.Animation.BOUNCE),n.marker=t,n.setContent("<div>".concat(t.title,"</div>")),n.open(e,t),n.addListener("closeclick",function(){n.setPosition(null),t.setAnimation(null)}),E.fetchWikiData(t,n))},E.fetchWikiData=function(e,t){var n=e.title,a="https://en.wikipedia.org/w/api.php?&origin=*&action=opensearch&format=json&search=".concat(n),o='<div role="dialog" class="infowindow" tabindex="0" aria-labelledby="infowindow-help">\n      <h2>'.concat(n,'</h2>\n      <p id="infowindow-help">Relevant Wikipedia Links</p>\n    <ul>');fetch(a).then(function(e){return e.json()}).then(function(e){if(e.error&&e.error.code&&e.error.info)throw e.error.info;for(var n=0;n<e.length;n+=1)o+=e[n].length?'<li class="infowindow-item">\n                <a target ="_blank" href=http://en.wikipedia.org/wiki/'.concat(e[n],">\n                  ").concat(e[n],"\n                </a>\n            </li>"):"";o+="</ul></div>",t.setContent(o)}).catch(function(e){o+="<p class='error' style='color:red'>".concat(e,"</p></ul></div>"),t.setContent(o)})};var O=E,M=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).updateQuery=Object(g.debounce)(function(e){n.updateQueryState(e)},300),n.state={locations:[],filterQuery:"",selectedPlaceTitle:""},n.handleRequestError=function(e){var t=window.document.getElementById("places-list"),n=window.document.createElement("p");n.className="error",n.textContent=e,n.style="color: red",t.appendChild(n)},n.updateQueryState=function(e){n.setState({filterQuery:e})},n.selectPlace=function(e){n.setState({selectedPlaceTitle:e})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://api.foursquare.com/v2/venues/search?ll=26.14,78.10&client_id=MFWBYGLPDEHOGIVGLHV5NJ15OKXXHGKDQU0VJEROPTKWGVSO&client_secret=KUJCYLVMHE4XX0YINYCEJ0ITW4EQBEHYWLN3C5RDBR5QW43S&limit=25&v=20181117").then(function(e){if(200===e.status)return e.json();throw Error("No data found for co-ordinates: 26.14,78.10")}).then(function(t){if(!t.response||!t.response.venues)throw Error("No venues detail found for co-ordinates: 26.14,78.10");console.log("Fetch Request Successful");var n=t.response.venues;e.setState({locations:n})}).catch(function(t){return e.handleRequestError(t)})}},{key:"render",value:function(){var e,t=this.state,n=t.locations,a=t.filterQuery,i=t.selectedPlaceTitle,r=this.props.isListOpen;if(a.trim()){var l=new RegExp(f()(a.trim()),"i");e=n.filter(function(e){return l.test(e.name)})}else e=n;return o.a.createElement("main",{"aria-label":"Neighborhood Map",role:"main"},o.a.createElement("section",{id:"placelistview",className:r?"listview open":"listview"},o.a.createElement(b,{updateQuery:this.updateQuery}),o.a.createElement(k,{locations:e,selectPlace:this.selectPlace})),o.a.createElement(O,{locations:e,filterText:a,selectedPlaceTitle:i}))}}]),t}(a.Component),j=function(e){function t(){var e,n;Object(l.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o)))).state={isListOpen:!1},n.showListView=function(){n.setState(function(e){return{isListOpen:!e.isListOpen}})},n}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.isListOpen;return o.a.createElement("div",{className:"App"},o.a.createElement(m,{showPlaceList:this.showListView}),o.a.createElement(M,{isListOpen:e}))}}]),t}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(j,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[12,2,1]]]);
//# sourceMappingURL=main.88236936.chunk.js.map